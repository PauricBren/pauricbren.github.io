<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abhaya+Libre&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alumni+Sans+Collegiate+One&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alumni+Sans+Inline+One&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Armata&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Artifika&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/fonts/typicons.min.css">
    <link rel="stylesheet" href="assets/css/bss-overrides.css">
</head>

<body>
    <header class="pt-0">
        <div class="container pt-0 pt-xl-5">
            <div class="row pt-0">
                <div class="col-md-8 text-center text-md-start mx-auto">
                    <div class="text-center">
                        <h1 class="display-4 fw-bold mb-5">ROS2-Driven Mobile Robot with Sensor Fusion</h1>
                        <p class="fs-4 fw-bolder text-muted mb-5" style="text-align: center;">Project Overview</p>
                        <p class="fs-5 text-muted mb-5" style="text-align: left;">As part of my degree in robotics &amp; intelligent devices, I developed a completely custom mobile robot for my final year project. The goal &amp; motivation for this project was to investigate sensor fusion with a minimal sensor suite &amp; low end sensors aiming to achieve similar performance to expensive setups for the purpose of cost effectiveness. Developing &amp; designing this robot from the ground up was also the best way to test &amp; showcase my abilities earned from my time in University.<br><br>The AMR developed in this project is an omnidirectional, forklift inspired AMR using Mecanum wheels, a Raspberry Pi 4 and a custom motor driver PCB. The AMR was driven via local area network connection to a main computer running ROS2 and Navigation2 software. A basic level of autonomous navigation was achieved by fusing wheel encoders &amp; lidar with an extended Kalman filter allowing the robot to localise itself within a room &amp; navigating to a given waypoint. The AMR's odometry improved by 87.5% by fusing these sensors.<br><br>This was considered a success given that as little as 2 low end sensors could achieve basic navigation for a brief time. This sets a good foundation for future work on this project by integrating more sensors &amp; finding a minimal cost effective solution. The rest of this page provides an overview of the robots development while a more detailed technical report is available on request.<br><br></p>
                    </div>
                </div>
                <div class="col-12 col-lg-10 mx-auto">
                    <div class="text-center position-relative"><img class="img-fluid" width="700" height="468" src="assets/img/robot-proj-bg.png"></div>
                </div>
            </div>
        </div>
    </header>
    <section></section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="display-6 fw-bold pb-md-4">AMR Design &amp; Manufacture&nbsp;<span class="underline"></span></h3>
                </div>
                <div class="col-md-6 pt-4">
                    <p class="text-muted mb-4">The AMRs design aimed to create a platform for simple &amp; diverse sensor integration along side creating a robust robot structurally. Allowing sufficient space for optional mounting holes and choosing materials such as aluminium and acrylic achieved this goal. The mechanical design was developed entirely in SolidWorks while circuit design was done in EasyEDA. The manufacturing processes to create these designs are listed below.</p>
                </div>
            </div>
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div>
                        <div class="row gy-2 row-cols-1 row-cols-sm-2">
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" class="fs-3 text-primary bg-secondary">
                                        <path d="M11 17C11 17.3466 11.1795 17.6684 11.4743 17.8507C11.7691 18.0329 12.1372 18.0494 12.4472 17.8944L16.4472 15.8944C16.786 15.725 17 15.3788 17 15V9.23607C17 8.88949 16.8205 8.56762 16.5257 8.38542C16.2309 8.20321 15.8628 8.18665 15.5528 8.34164L11.5528 10.3416C11.214 10.511 11 10.8573 11 11.2361V17Z" fill="currentColor"></path>
                                        <path d="M15.2111 6.27639C15.5499 6.107 15.7639 5.76074 15.7639 5.38197C15.7639 5.00319 15.5499 4.65693 15.2111 4.48754L10.4472 2.10557C10.1657 1.96481 9.83431 1.96481 9.55279 2.10557L4.78885 4.48754C4.45007 4.65693 4.23607 5.00319 4.23607 5.38197C4.23607 5.76074 4.45007 6.107 4.78885 6.27639L9.55279 8.65836C9.83431 8.79912 10.1657 8.79912 10.4472 8.65836L15.2111 6.27639Z" fill="currentColor"></path>
                                        <path d="M4.44721 8.34164C4.13723 8.18665 3.76909 8.20321 3.47427 8.38542C3.17945 8.56762 3 8.88949 3 9.23607V15C3 15.3788 3.214 15.725 3.55279 15.8944L7.55279 17.8944C7.86277 18.0494 8.23091 18.0329 8.52573 17.8507C8.82055 17.6684 9 17.3466 9 17V11.2361C9 10.8573 8.786 10.511 8.44721 10.3416L4.44721 8.34164Z" fill="currentColor"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">3D Printing</h5>
                                </div>
                                <p class="text-muted my-3">Smaller components with more complex shapes (PLA Plastic).</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-lightning-charge-fill fs-3 text-primary bg-secondary">
                                        <path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Laser Cutting</h5>
                                </div>
                                <p class="text-muted my-3">Larger components of simple design but require stronger material (Acrylic)</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-tools fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"></path>
                                        <path d="M14.5 5.5l4 4"></path>
                                        <path d="M12 8l-5 -5l-4 4l5 5"></path>
                                        <path d="M7 8l-1.5 1.5"></path>
                                        <path d="M16 12l5 5l-4 4l-5 -5"></path>
                                        <path d="M16 17l-1.5 1.5"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Manual Machining</h5>
                                </div>
                                <p class="text-muted my-3">Aluminium components</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-cpu fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M5 5m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"></path>
                                        <path d="M9 9h6v6h-6z"></path>
                                        <path d="M3 10h2"></path>
                                        <path d="M3 14h2"></path>
                                        <path d="M10 3v2"></path>
                                        <path d="M14 3v2"></path>
                                        <path d="M21 10h-2"></path>
                                        <path d="M21 14h-2"></path>
                                        <path d="M14 21v-2"></path>
                                        <path d="M10 21v-2"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">JLC PCB Fabrication</h5>
                                </div>
                                <p class="text-muted my-3">PCB fabrication company to create the PCB in this project.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 order-first order-md-last">
                    <div><img class="img-fluid" width="950" height="696" src="assets/img/SolidworksAMR-pic.png"></div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="838" height="660" src="assets/img/labelled-AMR-image.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Key Features &amp; Components</h3>
                        <p class="text-muted py-4 py-md-0">The primary sensor on this robot is the YD Lidar X4 providing a 2D point cloud of it's surroundings. This allows the robot to build a map for navigation.<br><br>The robot also utilizes Swedish wheels which are common among mobile robots, especially in a warehouse setting which this robot &amp; project is inspired by. These wheels make the robot omnidirectional when each wheel is driven independently with a kinematic model.&nbsp; This means motion control required several PID controllers &amp; was achieved with custom firmware &amp; electronics.<br><br>The lidar &amp; electronics interface with a Raspberry Pi 4, the onboard computer which creates a ROS2 node to communicate with the main navigation stack on a separate computer.<br><br>The design also includes a simple forklift mechanism as a demonstration piece for programming robot actions in ROS2. The AMR is powered via a tether to a power supply as to simplify the design and focus on the sensor integration.&nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="747" height="677" src="assets/img/EasyEdaPcb.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Electronics &amp; PCB Design</h3>
                        <p class="text-muted py-4 py-md-0">Since the Swedish wheels need independent motors, a distributed motor control architecture was implemented. Each motor has a dedicated MCU to reduce scheduling overhead &amp; guarantee deterministic low-latency feedback loops.<br><br>Each MCU (PIC16F1885) Handles it's corresponding motor's control &amp; encoder signals. The encoder is interpreted using the MCU's built in signal measurement module.&nbsp;&nbsp;<br><br>The PCB contains 4 MCUs, 4 motor drivers (DRV8871), programmer pins along with other general electronics such as decoupling capacitors &amp; LEDs for debugging. The PCB design also includes large ground planes to help with the motor drivers heat dissipation as well as sufficiently sized traces to handle the current draw.<br><br>This motor controller board interfaces with the onboard computer via I2C communication. The picture shows the finalized PCB design in EasyEda.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="798" height="582" src="assets/img/FinishedPcb.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Fabricated PCB &amp; Firmware</h3>
                        <p class="text-muted py-4 py-md-0">The displayed picture shows the fabricated &amp; soldered PCB design. Following this stage, the firmware was developed in MPLAB. The firmware was entirely interrupt based. Interrupts are triggered for the 2 main tasks of the MCU - interpret I2C commands &amp; measuring the encoders signal frequency. The control signal for the motor was done by setting the PWM duty cycle of the PWM module within the MCU.<br><br>The PID control loop was handled by the onboard computer. The MCU &amp; firmware is purely for abstracting out the low level motor control &amp; speed measurement. The onboard computer sends I2C commands to the MCU to request the motor speed &amp; to set the speed via PWM.<br><br><br></p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="760" height="577" src="assets/img/speedPlot.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Measuring the Motor Speed</h3>
                        <p class="text-muted py-4 py-md-0">An important aspect of this project is tackling inaccuracies in robot odometry which stems from sensor error. The first case of this was found with the signal measurement timer module on the MCU. To solve this problem, a function to model the error was created. This was done by using a signal generator to test &amp; mimic frequencies expected from the motor encoder (0-2KHz). The error between the measurement and signal generator was plotted and a line of best fit was calculated.&nbsp;<br><br>This model was incorporated into the robots software when it requests speed data.&nbsp; &nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="display-6 fw-bold pb-md-4">AMR &amp; Navigation Software<span class="underline"></span></h3>
                </div>
                <div class="col-md-6 pt-4">
                    <p class="text-muted mb-4">The developed software spans over 2 parts, the AMR's onboard computer and a laptop capable of running the ROS2 navigation stack. They both communicate over a local area network via ROS2 nodes.&nbsp; The AMR utilizes 4 ROS2 nodes responsible for its actuation &amp; sensing, listed as shown. The laptop in this case communicates with the AMR nodes &amp; connects them to a configured Rviz environment running the navigation stack. The navigation stack was setup with configuration files &amp; set to run the simultaneous localisation and mapping (SLAM) algorithm.</p>
                </div>
            </div>
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div>
                        <div class="row gy-2 row-cols-1 row-cols-sm-2">
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><i class="icon ion-network fs-3 text-primary bg-secondary"></i>
                                    <h5 class="fw-bold ms-2 mb-0">Hardware Interface Node</h5>
                                </div>
                                <p class="text-muted my-3">Handles I2C communication with the motor driver PCB. It polls for each of the motors speed measurements then translates them into degrees per second to publish for other nodes to use. This node also sets the PWM control signals for the MCUs which it gets from the motor controller node.</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-circuit-motor fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path>
                                        <path d="M5 12h-3"></path>
                                        <path d="M19 12h3"></path>
                                        <path d="M10 14v-4l2 2l2 -2v4"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Motor Controller Node</h5>
                                </div>
                                <p class="text-muted my-3">This node performs the PID control loop for each of the motors. Given the speed of each motor it outputs the control signal as a PWM duty cycle value.&nbsp;</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-window-fullscreen fs-3 text-primary bg-secondary">
                                        <path d="M3 3.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1.5 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"></path>
                                        <path d="M.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5zM1 5V2h14v3zm0 1h14v8H1z"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Services Node</h5>
                                </div>
                                <p class="text-muted my-3">This node provides an interface for several onboard peripherals. the forklift mechanism, OLED screen for debug information and a buzzer for the same purpose.&nbsp;</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-dash-circle-dotted fs-3 text-primary bg-secondary">
                                        <path d="M8 0c-.176 0-.35.006-.523.017l.064.998a7.117 7.117 0 0 1 .918 0l.064-.998A8.113 8.113 0 0 0 8 0M6.44.152c-.346.069-.684.16-1.012.27l.321.948c.287-.098.582-.177.884-.237L6.44.153zm4.132.271a7.946 7.946 0 0 0-1.011-.27l-.194.98c.302.06.597.14.884.237l.321-.947zm1.873.925a8 8 0 0 0-.906-.524l-.443.896c.275.136.54.29.793.459l.556-.831zM4.46.824c-.314.155-.616.33-.905.524l.556.83a7.07 7.07 0 0 1 .793-.458zM2.725 1.985c-.262.23-.51.478-.74.74l.752.66c.202-.23.418-.446.648-.648l-.66-.752zm11.29.74a8.058 8.058 0 0 0-.74-.74l-.66.752c.23.202.447.418.648.648l.752-.66m1.161 1.735a7.98 7.98 0 0 0-.524-.905l-.83.556c.169.253.322.518.458.793l.896-.443zM1.348 3.555c-.194.289-.37.591-.524.906l.896.443c.136-.275.29-.54.459-.793l-.831-.556zM.423 5.428a7.945 7.945 0 0 0-.27 1.011l.98.194c.06-.302.14-.597.237-.884l-.947-.321zM15.848 6.44a7.943 7.943 0 0 0-.27-1.012l-.948.321c.098.287.177.582.237.884l.98-.194zM.017 7.477a8.113 8.113 0 0 0 0 1.046l.998-.064a7.117 7.117 0 0 1 0-.918l-.998-.064zM16 8a8.1 8.1 0 0 0-.017-.523l-.998.064a7.11 7.11 0 0 1 0 .918l.998.064A8.1 8.1 0 0 0 16 8M.152 9.56c.069.346.16.684.27 1.012l.948-.321a6.944 6.944 0 0 1-.237-.884l-.98.194zm15.425 1.012c.112-.328.202-.666.27-1.011l-.98-.194c-.06.302-.14.597-.237.884l.947.321zM.824 11.54a8 8 0 0 0 .524.905l.83-.556a6.999 6.999 0 0 1-.458-.793l-.896.443zm13.828.905c.194-.289.37-.591.524-.906l-.896-.443c-.136.275-.29.54-.459.793l.831.556zm-12.667.83c.23.262.478.51.74.74l.66-.752a7.047 7.047 0 0 1-.648-.648l-.752.66zm11.29.74c.262-.23.51-.478.74-.74l-.752-.66c-.201.23-.418.447-.648.648l.66.752m-1.735 1.161c.314-.155.616-.33.905-.524l-.556-.83a7.07 7.07 0 0 1-.793.458l.443.896zm-7.985-.524c.289.194.591.37.906.524l.443-.896a6.998 6.998 0 0 1-.793-.459l-.556.831zm1.873.925c.328.112.666.202 1.011.27l.194-.98a6.953 6.953 0 0 1-.884-.237l-.321.947zm4.132.271a7.944 7.944 0 0 0 1.012-.27l-.321-.948a6.954 6.954 0 0 1-.884.237l.194.98zm-2.083.135a8.1 8.1 0 0 0 1.046 0l-.064-.998a7.11 7.11 0 0 1-.918 0l-.064.998zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1z"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">YD Lidar Node</h5>
                                </div>
                                <p class="text-muted my-3">A Github repository provided the node for the YD lidar, it reads the lidar hardware and publishes the scan data. This scan data also provides odometry via the generalized iterative closest point (GICP) algorithm. This algorithm was also sourced from Github.&nbsp;</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 order-first order-md-last">
                    <div><img class="img-fluid" width="717" height="416" src="assets/img/robotTest1.png"></div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="810" height="627" src="assets/img/PIDGraph.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">PID Motor Control</h3>
                        <p class="text-muted py-4 py-md-0">As stated, the motor controller node handles the PID control loop. It works by interpreting ROS2 Twist messages (motion commands)&nbsp; &amp; translating them into set points more each of the motors. The set points are calculated from a kinematic model. After these calculations the control signal is outputted as a value for the PWM duty cycle for the hardware interface node to use.&nbsp;<br><br>Since the speed of the motors are being controlled rather than position, only the proportional parameter of the controller had to be tuned along with slight adjustments to the derivative. This is because controlling speed implicitly adds an integrator term to the system.&nbsp; Primarily adjusting the proportional term brought the system to its setpoint without steady state error as a result. Small oscillations were present in the system making it marginally stable. This is clearly shown in the provided picture where the response of the motor system is shown with a setpoint of 1750 degrees per second. The controller was tuned until the settling time was about 1.5 seconds.&nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="425" height="456" src="assets/img/rviz.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Rviz &amp; Navigation Stack</h3>
                        <p class="text-muted py-4 py-md-0">The final step at this stage with software development was to integrate sensor information from the AMR nodes into the ROS2 navigation stack alongside Rviz. Once Rviz and the navigation stack are configured correctly, the robot can be given a destination to autonomously drive to.&nbsp;&nbsp;<br><br>The first step to do this was to describe the robots general structure &amp; dimensions using a universal robot description file (URDF). This description file allows Navigation 2 to associate odometry, scan and map data (ROS2 topics) with a virtualized robot description. The robot odometry links to the robots base link which is typically a point in the middle of the robot. The base link is where all other robot links attach to in some way and serves as the robots coordinate frame relative to the world. The odometry therefore describes the distance displaced from a starting position in the world to the base link.<br><br>The provided picture shows the URDF description of the AMR in Rviz. The green outline is the point cloud generated from the Lidar.&nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="display-6 fw-bold pb-md-4">AMR Testing<span class="underline"></span></h3>
                </div>
                <div class="col-md-6 pt-4">
                    <p class="text-muted mb-4">At this stage the robot was successfully setup with Navigation 2 configured to run SLAM &amp; other navigation algorithms. The implementation so far meets all the basic requirements of having a way to build a map (lidar point cloud) and sources for odometry (wheel encoders &amp; lidar GICP algorithm).&nbsp; The provided picture shows the full working system with the robot in a small space. The AMR is effectively mapping its environment as seen with the monochromatic map in Rviz against the actual room layout on the right. The highlights of testing &amp; improving this system are listed.</p>
                </div>
            </div>
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div>
                        <div class="row gy-2 row-cols-1 row-cols-sm-2">
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-test-pipe-2 fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M15 3v15a3 3 0 0 1 -6 0v-15"></path>
                                        <path d="M9 12h6"></path>
                                        <path d="M8 3h8"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Lidar Odometry Test</h5>
                                </div>
                                <p class="text-muted my-3">The SLAM &amp; navigation was tested with a single odometry source (Lidar with GICP). Despite the AMR being stationary the odometry reported the robot to be moving.&nbsp;</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-trending-down fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M3 7l6 6l4 -4l8 8"></path>
                                        <path d="M21 10l0 7l-7 0"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Lidar Odometry Error</h5>
                                </div>
                                <p class="text-muted my-3">The error in the lidars odometry has several sources. Along with the lidars measurement error, there was also vibration &amp; uneven rotation from the lidars mechanics.&nbsp;&nbsp;</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-wheel fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                                        <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                                        <path d="M3 12h6"></path>
                                        <path d="M15 12h6"></path>
                                        <path d="M13.6 9.4l3.4 -4.8"></path>
                                        <path d="M10.4 14.6l-3.4 4.8"></path>
                                        <path d="M7 4.6l3.4 4.8"></path>
                                        <path d="M13.6 14.6l3.4 4.8"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Sensor Fusion With Wheel Encoders</h5>
                                </div>
                                <p class="text-muted my-3">Fusing the wheel encoder data with the lidar yielded an 87.5% improvement in odometry. This improvement was sufficient enough for the AMR to navigate autonomously.&nbsp;</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><i class="typcn typcn-location fs-3 text-primary bg-secondary"></i>
                                    <h5 class="fw-bold ms-2 mb-0">Overall System</h5>
                                </div>
                                <p class="text-muted my-3">The completed system was capable of building a map, localising itself and driving autonomously to a given destination. This functionality was limited but was successful in its minimal setup. This gives great potential for the future work of this project.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 order-first order-md-last">
                    <div><img class="img-fluid" width="602" height="445" src="assets/img/AMRTest.png"></div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="461" height="352" src="assets/img/odomBefore.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Initial Odometry Test Using Lidar Only&nbsp;</h3>
                        <p class="text-muted py-4 py-md-0">To begin, the system was set to run with odometry from the lidar only. The odometry produced was inaccurate. When the robot was stationary, the odometry would report the following average speeds:<br><br>• Vx = -0.023 m/s<br>• Vy = -0.026 m/s<br>• Vyaw = -0.040 m/s<br><br>The provided picture shows the AMRs position in space moving away from the starting point due to this motion induced by the lidar odometry. The graph states that the AMR is displaced over 1.6 meters after 70 seconds. This inaccurate odometry is incurred from more than just variance in lidar distance tolerances. The lidar itself is exposed to vibrations from its own motor &amp; is visibly evident. It can also be seen in the live scan data in Rviz, the green point cloud jitters and moves.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="611" height="308" src="assets/img/ScanData.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Raw Lidar Scan Data&nbsp;</h3>
                        <p class="text-muted py-4 py-md-0">Taking a closer look at the lidars behaviour, the provided graph visualizes the lidar scan data over 10 consecutive scans while the robot is stationary. Each scan contains 100 distance points and are colour coded. The colours represent the following:<br><br>• Red: distances between 0 to 1 meters<br>• Blue: distances between 1 to 2 meters<br>• Green: distances between 2 to 3 meters<br>• Yellow: distances between 3 to 4 meters<br>• Purple: distances between 4 to 5 meters<br>• Black: distances between 5 to 6 meters<br><br>It can be seen from this data that the scans are more or less consistent apart from the pattern of red distance points. These red points are values of 0 that pop in &amp; out from the scan, speculated to be from the lidars jitter. Removing or improving the lidars jitter in software would be a suitable topic for future work. However for this projects timeline moving on to sensor fusion is the optimal solution to this challenge.&nbsp;<br><br></p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="531" height="348" src="assets/img/KalmanFilter.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Extended Kalman Filter (EKF)</h3>
                        <p class="text-muted py-4 py-md-0">The odometry from the robots motors were fused with the lidars odometry using an EKF. Navigation 2 in ROS2 provides this method of sensor fusion in a configuration file as seen in the provided picture. It can be seen how easily sensors can be fused &amp; tuned in a YAML file. It works by specifying the ROS2 topic in which to read the sensor information from &amp; providing boolean values for what data to pass through: positions, velocities and accelerations over the x,&nbsp; y and z axes.&nbsp;&nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><img class="img-fluid" width="440" height="331" src="assets/img/odomAfter.png"></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">Final Odometry Test</h3>
                        <p class="text-muted py-4 py-md-0">After fusing the sensors, the odometry was subjected to the same test done earlier. The provided odometry graph shows a drastic improvement. The odometry now states that the AMR is displaced over 0.2 meters after 80 seconds.&nbsp;<br><br>This reduction in error makes the system good enough for a full navigation test. The video below shows the robot being given a waypoint via Rviz followed by the robot driving forward and&nbsp; turning to reach that waypoint.&nbsp; &nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="display-6 fw-bold pb-md-4">Conclusion<span class="underline"></span></h3>
                </div>
                <div class="col-md-6 pt-4">
                    <p class="text-muted mb-4">It can be concluded that the goal in this project of demonstrating basic navigation on a small scale AMR with a minimal sensor suite was achieved. The AMRs odometry was improved by 87.5% using sensor fusion. basic navigation was achieved using just 2 low-end sensors which is promising for the future work of this project to develop cheaper sensor suites for autonomous robotics. With that said it was clear that noise was very prevalent in the sensors &amp; the AMR could only operate within a short amount of time before the inaccuracies overcame the software's ability to localise and navigate.&nbsp; Investigating the fusion of more low-end sensors as well as attempting to model the noise &amp; error in these sensors is how to progress this project. Finding a way to use sensor fusion and the correct sensor suite to yield an AMR with the same navigation capabilities as Industrial AMRs would greatly contribute to the affordability of these systems.&nbsp;</p>
                </div>
            </div>
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div>
                        <div class="row gy-2 row-cols-1 row-cols-sm-2">
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-trending-up fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M3 17l6 -6l4 4l8 -8"></path>
                                        <path d="M14 7l7 0l0 7"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Odometry Improvement</h5>
                                </div>
                                <p class="text-muted my-3">Fusing lidar odometry (GICP algorithm) with the wheel encoders odometry (kinematic model) gave an improvement of 87.5%.</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-car fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                        <path d="M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                        <path d="M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Custom Small Scale AMR Build</h5>
                                </div>
                                <p class="text-muted my-3">Fully capable small scale AMR development with a custom PCB, CAD Design, Firmware &amp; Software.</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-sun fs-3 text-primary bg-secondary">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path>
                                        <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Future Work</h5>
                                </div>
                                <p class="text-muted my-3">Investigate the fusion of more low-end sensors to contribute the affordability of autonomous robotics by making the sensor suites more effective &amp; cheaper.</p>
                            </div>
                            <div class="col text-center text-md-start">
                                <div class="d-flex justify-content-center align-items-center justify-content-md-start"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" class="fs-3 text-primary bg-secondary">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3 5C3 3.89543 3.89543 3 5 3H15C16.1046 3 17 3.89543 17 5V13C17 14.1046 16.1046 15 15 15H12.7808L12.903 15.4887L13.7071 16.2929C13.9931 16.5789 14.0787 17.009 13.9239 17.3827C13.7691 17.7563 13.4045 18 13 18H7.00003C6.59557 18 6.23093 17.7563 6.07615 17.3827C5.92137 17.009 6.00692 16.5789 6.29292 16.2929L7.09706 15.4887L7.21925 15H5C3.89543 15 3 14.1046 3 13V5ZM8.7713 12C8.75657 11.9997 8.74189 11.9997 8.72725 12H5V5H15V12H11.2728C11.2582 11.9997 11.2435 11.9997 11.2288 12H8.7713Z" fill="currentColor"></path>
                                    </svg>
                                    <h5 class="fw-bold ms-2 mb-0">Skills Developed</h5>
                                </div>
                                <p class="text-muted my-3">C, C++, Python, ROS2, Solidworks, YAML, PCB Design, Electronics Testing &amp; Debugging.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 order-first order-md-last">
                    <div><iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/tAT4nuR0rmI" width="560" height="315"></iframe></div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container py-4 py-xl-5">
            <div class="row gy-4 gy-md-0">
                <div class="col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center">
                    <div><iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/yPFNFPgpGS8" width="560" height="315"></iframe></div>
                </div>
                <div class="col">
                    <div style="max-width: 450px;">
                        <h3 class="fw-bold pb-md-4">AMR Manual Teleoperation</h3>
                        <p class="text-muted py-4 py-md-0">The following video shows the motion capable of this AMR using a remote controller. The Swedish wheels allow for sidewards motion as well as motion in any direction. The code for the firmware &amp; software of this project can be found on Github, use the below link:<br><br>https://github.com/PauricBrennan/FYP-Code&nbsp; &nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="py-5"></section>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/stylish-portfolio.js"></script>
</body>

</html>